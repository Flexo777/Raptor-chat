{% extends "base.html" %}

{% block title %}Chat with {{ partner.username }}{% endblock %}

{% block content %}
<div class="flex h-screen">
  <!-- Sidebar -->
  <nav class="bg-[#3b2a5a] w-20 flex flex-col p-4 space-y-8 text-[#6e5a9a] text-sm select-none">
    <div class="flex justify-center mb-6">
      <img src="{{ url_for('static', filename='images/rocket-orange.png') }}" alt="RAPTOR Logo" class="w-8 h-8">
    </div>
    
    <a href="{{ url_for('dashboard') }}" class="flex flex-col items-center space-y-1 hover:text-orange-600 transition">
      <i class="fas fa-tachometer-alt text-xl"></i>
      <span class="text-xs">Dashboard</span>
    </a>
    
    <a href="{{ url_for('chat') }}" class="flex flex-col items-center space-y-1 hover:text-orange-600 transition">
      <i class="fas fa-comments text-xl"></i>
      <span class="text-xs">Chat</span>
    </a>
    
    <a href="#" class="flex flex-col items-center space-y-1 hover:text-orange-600 transition">
      <i class="fas fa-cog text-xl"></i>
      <span class="text-xs">Settings</span>
    </a>
  </nav>

  <!-- Chat Area -->
  <div class="flex-1 flex flex-col">
    <!-- Chat Header -->
    <header class="bg-[#3b2a5a] p-4 flex justify-between items-center border-b border-[#4a3a7a]">
      <div class="flex items-center space-x-3">
        <div class="w-3 h-3 rounded-full bg-green-500"></div>
        <h2 class="font-semibold">{{ partner.username }}</h2>
      </div>
      <a href="{{ url_for('dashboard') }}" class="text-sm text-[#6e5a9a] hover:text-orange-600 transition">
        <i class="fas fa-times"></i>
      </a>
    </header>

    <!-- Messages -->
    <div class="flex-1 p-4 overflow-y-auto bg-[#241a44]" id="chat-messages">
      {% for message in messages %}
      <div class="mb-4 {% if message.sender_id == current_user.id %}text-right{% endif %}">
        <div class="inline-block max-w-xs md:max-w-md rounded-lg p-3 {% if message.sender_id == current_user.id %}bg-orange-600 text-white{% else %}bg-[#3b2a5a]{% endif %}">
          <p class="text-sm">{{ message.content }}</p>
          <p class="text-xs mt-1 opacity-70">{{ message.timestamp.strftime('%H:%M') }}</p>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- Message Input -->
    <div class="bg-[#3b2a5a] p-4">
      <form id="message-form" class="flex space-x-2">
        <input type="text" id="message-input" 
               class="flex-1 text-sm rounded bg-[#241a44] border border-[#4a3a7a] px-4 py-2 placeholder-[#6e5a9a] focus:outline-none focus:ring-1 focus:ring-orange-500" 
               placeholder="Type a message..." autocomplete="off">
        <button type="submit" class="bg-orange-600 text-sm font-semibold rounded px-4 py-2 hover:bg-orange-700 transition">
          Send
        </button>
      </form>
    </div>
  </div>
</div>

<script>
// JavaScript untuk real-time chat akan ditambahkan di sini
</script>
{% endblock %}